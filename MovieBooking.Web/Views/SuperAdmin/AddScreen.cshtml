@model AddScreenViewModel

<h2 class="mt-4">➕ Add Screen</h2>

<form asp-action="AddScreen" method="post" class="card p-4 shadow-sm">

    <!-- THEATRE -->
    <div class="mb-3">
        <label class="form-label">Theatre</label>
        <select asp-for="TheatreId"
                class="form-select"
                asp-items="@(new SelectList(Model.Theatres, "TheatreId", "Name"))">
            <option value="">-- Select Theatre --</option>
        </select>
    </div>

    <!-- SCREEN NAME -->
    <div class="mb-3">
        <label class="form-label">Screen Name</label>
        <input asp-for="ScreenName"
               class="form-control"
               placeholder="Screen 1" />
    </div>

    <!-- SEAT LAYOUT -->
    <div class="mb-3">
        <label class="form-label">Seat Layout Type</label>
        <select asp-for="SeatLayoutType" class="form-select">
            <option value="">-- Select Layout --</option>
            <option value="STANDARD">STANDARD</option>
            <option value="VIP">VIP</option>
        </select>
    </div>

    <hr />

    <!-- DYNAMIC SEAT ROWS -->
    <h5>Seat Layout</h5>
    <div id="seatRows"></div>

    <button type="button"
            class="btn btn-outline-primary mt-2"
            onclick="addSeatRow()">
        ➕ Add Row
    </button>

    <button type="submit"
            class="btn btn-success mt-4">
        Save Screen
    </button>
</form>

@section Scripts {
    <script>
        let rowIndex = 0;

        function addSeatRow() {
            const container = document.getElementById("seatRows");

            const html = `
            <div class="border rounded p-3 mt-3">
                <div class="row mb-2">
                    <div class="col">
                        <label>Row</label>
                        <input name="SeatRows[${rowIndex}].SeatRow"
                               class="form-control"
                               placeholder="A" />
                    </div>

                    <div class="col">
                        <label>Seat Count</label>
                        <input type="number"
                               name="SeatRows[${rowIndex}].SeatCount"
                               class="form-control"
                               min="1" />
                    </div>

                    <div class="col">
                        <label>Seat Type</label>
                        <select name="SeatRows[${rowIndex}].SeatType"
                                class="form-select">
                            <option value="NORMAL">Normal</option>
                            <option value="VIP">VIP</option>
                            <option value="RECLINER">Recliner</option>
                        </select>
                    </div>

                    <div class="col">
                        <label>Price Multiplier</label>
                        <input type="number"
                               step="0.1"
                               name="SeatRows[${rowIndex}].PriceMultiplier"
                               class="form-control"
                               value="1.0" />
                    </div>
                </div>
            </div>
            `;

            container.insertAdjacentHTML("beforeend", html);
            rowIndex++;
        }
    </script>
}
